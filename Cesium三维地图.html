<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./Cesium/Cesium.js"></script>
    <link rel="stylesheet" href="./Cesium/Widgets/widgets.css" />
    <style>
      * {
        margin: 0;
        padding: 0;
        list-style: none;
        font-size: 14px;
      }
      .container {
        width: 100vw;
        height: 100vh;
      }
      .container #cesiumDom {
        width: 100%;
        height: 100%;
        background-color: #0000;
      }
      .cesium-widget-credits {
        /* 去除logo */
        display: none !important;
      }

      .cesium-container {
        width: 100%;
        height: 100%;
        position: relative;
        background: url("../img/water.jpg") no-repeat;
        background-size: cover;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="cesiumDom"></div>
    </div>
  </body>
  <!-- <script src="./js/cesium封装.js"></script> -->
  <script src="./js/cesium三维地图.js"></script>
  <!-- <script src="./js/cesium三维地图2.js"></script> -->
  <script>
    // const cesiumDom = document.getElementById("cesiumDom");
    // let viewer; // cesium3D地图实例

    // // 初始化地图选项
    // const option = {
    //   animation: false, //是否显示动画控件
    //   homeButton: false, // 是否显示首页按钮
    //   geocoder: false, // 是否显示输入地名查找控件
    //   baseLayerPicker: true, // 是否显示选择地形影像等的控件
    //   timeline: false, // 是否显示时间线控件
    //   fullscreenButton: false, // 是否全屏显示
    //   scene3DOnly: true, // 如果设置为true，则所有几何图形以3D模式绘制以节约GPU资源
    //   infoBox: false, // 是否显示点击要素之后显示的信息
    //   sceneModePicker: true, // 是否显示投影方式控件（包含二维及三维投影）
    //   navigationHelpButton: false, // 是否显示帮助控件
    //   creditDisplay: false, // 是否显示版权信息
    //   selectionIndicator: false, // 是否显示选取指示器组件
    //   imageryProvider: false, // 是否显示影像
    // };

    // // 添加城市区域划分
    // const addCityArea = async (geojson) => {
    //   console.log(geojson.features[0].geometry.coordinates[0]);
    //   const arr = [];
    //   geojson.features[0].geometry.coordinates[0][0].forEach((item) => {
    //     arr.push(item[0]);
    //     arr.push(item[1]);
    //   });
    //   const polygonWithHole = new Cesium.PolygonGeometry({
    //     polygonHierarchy: new Cesium.PolygonHierarchy(
    //       Cesium.Cartesian3.fromDegreesArray([
    //         73.0, 53.0, 73.0, 0.0, 135.0, 0.0, 135.0, 53.0,
    //       ]),
    //       [new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(arr))]
    //     ),
    //   });
    //   const geometry = Cesium.PolygonGeometry.createGeometry(polygonWithHole);
    //   const instances = [];
    //   instances.push(
    //     new Cesium.GeometryInstance({
    //       geometry: geometry,
    //       attributes: {
    //         color: Cesium.ColorGeometryInstanceAttribute.fromColor(
    //           Cesium.Color.fromCssColorString("#081122")
    //         ),
    //       },
    //     })
    //   );
    //   const addRect = (instances, left, down, right, up) => {
    //     instances.push(
    //       new Cesium.GeometryInstance({
    //         geometry: new Cesium.RectangleGeometry({
    //           rectangle: Cesium.Rectangle.fromDegrees(left, down, right, up),
    //         }),
    //         attributes: {
    //           color: Cesium.ColorGeometryInstanceAttribute.fromColor(
    //             Cesium.Color.fromCssColorString("#081122")
    //           ),
    //         },
    //       })
    //     );
    //   };
    //   addRect(instances, -180.0, -90.0, 73.0, 90.0);
    //   addRect(instances, 135.0, -90.0, 180.0, 90.0);
    //   addRect(instances, 73.0, 53.0, 135.0, 90.0);
    //   addRect(instances, 73.0, -90.0, 135.0, 0.0);
    //   viewer.scene.primitives.add(
    //     new Cesium.Primitive({
    //       geometryInstances: instances,
    //       appearance: new Cesium.PerInstanceColorAppearance({
    //         flat: true,
    //         translucent: false,
    //       }),
    //     })
    //   );
    // };

    // // 初始化Cesium3维地图
    // const initCesiumMap = async () => {
    //   viewer = new Cesium.Viewer(cesiumDom, option);
    //   viewer.camera.setView({
    //     destination: Cesium.Cartesian3.fromDegrees(
    //       121.10016246000218,
    //       30.420379951166946,
    //       50000
    //     ),
    //     orientation: {
    //       pitch: Cesium.Math.toRadians(-60),
    //     },
    //   });

    //   // 获取指定城市边界坐标数据
    //   const data = await fetch("/json/pinghu.json").then((res) => res.json());

    //   // 添加区域划分
    //   addCityArea(data);
    //   viewer.scene.skyBox.show = false; //去掉天空盒子
    //   viewer.scene.backgroundColor = new Cesium.Color(0, 0, 0, 0); //设置场景背景色透明，便于显示自定的背景
    //   viewer.scene.globe.baseColor = new Cesium.Color(0, 0, 0, 0); //修改地邱球体背景透明
    //   // viewer.scene.imageryLayers.removeAll(); //去除其他图层

    //   //加载瓦片资源
    //   const provider = new Cesium.UrlTemplateImageryProvider({
    //     url: "../img/water.jpg",
    //   });
    //   viewer.imageryLayers.addImageryProvider(provider);

    //   // 地图点击事件
    //   const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
    //   handler.setInputAction((event) => {
    //     let mapPosition = {};
    //     const pick1 = viewer.scene.pickPosition(event.position);
    //     const pick2 = viewer.scene.camera.pickEllipsoid(event.position);
    //     const ray = viewer.camera.getPickRay(event.position);
    //     const pick3 = viewer.scene.globe.pick(ray, viewer.scene);
    //     // 是否都获得了有效值
    //     if (
    //       Cesium.defined(pick1) &&
    //       Cesium.defined(pick2) &&
    //       Cesium.defined(pick3)
    //     ) {
    //       const pickArray = [pick1, pick2, pick3];
    //       pickArray.forEach((item) => {
    //         // 笛卡尔坐标系转为经纬度（弧度）坐标
    //         const cartographic = Cesium.Cartographic.fromCartesian(item);
    //         // 再将经纬度（弧度）坐标转化为经纬度角度坐标
    //         const lat = Cesium.Math.toDegrees(cartographic.latitude);
    //         const lng = Cesium.Math.toDegrees(cartographic.longitude);
    //         mapPosition = {
    //           x: lng,
    //           y: lat,
    //           z: cartographic.height,
    //         };
    //         console.log("鼠标点击的点坐标：", mapPosition);
    //       });
    //     }
    //   }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
    // };
  </script>
</html>
